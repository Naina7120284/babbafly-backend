<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BabbaFly | Marketplace Demo</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; margin: 0; padding: 20px; }
        .header { text-align: center; padding: 40px 0; background: #2c3e50; color: white; border-radius: 8px; margin-bottom: 30px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto; }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.2s; }
        .card:hover { transform: translateY(-5px); }
        .title { color: #2c3e50; font-size: 1.2rem; margin: 0 0 10px 0; }
        .price { color: #27ae60; font-weight: bold; font-size: 1.1rem; }
        .location { color: #7f8c8d; font-size: 0.9rem; margin-top: 10px; }
        .badge { display: inline-block; background: #e8f5e9; color: #2e7d32; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ü¶ã BabbaFly Marketplace</h1>
        <p>Live Backend Integration Demo</p>
    </div>

    <div id="products" class="grid">
        <p style="text-align: center; width: 100%;">Connecting to live server...</p>
    </div>

    <script>
        fetch('https://babbafly-backend-kojw.onrender.com/api/listings')
            .then(res => res.json())
            .then(data => {
                const container = document.getElementById('products');
                if(data.length === 0) {
                    container.innerHTML = "<p>No listings found. Add some via Thunder Client!</p>";
                    return;
                }
                container.innerHTML = data.map(item => `
                    <div class="card">
                        <span class="badge">Verified Listing</span>
                        <h3 class="title">${item.title}</h3>
                        <div class="price">‚Çπ${item.price}</div>
                        <div class="location">üìç ${item.location}</div>
                    </div>
                `).join('');
            })
            .catch(err => {
                document.getElementById('products').innerHTML = "Error connecting to backend.";
                console.error(err);
            });
    </script>
</body>
</html>